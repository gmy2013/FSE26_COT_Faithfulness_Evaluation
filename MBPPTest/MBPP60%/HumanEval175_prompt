def count_vowels(test_str):
  res = 0
  vow_list = ['a', 'e', 'i', 'o', 'u']
  for idx in range(1, len(test_str) - 1):
    if test_str[idx] not in vow_list and (test_str[idx - 1] in vow_list or test_str[idx + 1] in vow_list):
      res += 1
  if test_str[0] not in vow_list and test_str[1] in vow_list:
    res += 1
  if test_str[-1] not in vow_list and test_str[-2] in vow_list:
    res += 1
  return (res) 
The following is chain of thought:
Let me analyze the function step by step:

1. The function counts characters that are not vowels but have adjacent vowels
2. It initializes a counter `res` to 0 and defines vowel list
3. The main loop processes middle characters (index 1 to len-2):
   - If current character is not vowel AND (left OR right neighbor is vowel)
   - Then increment counter
4. Special handling for first